<!DOCTYPE html><html lang="es"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1"><title>Cumpleaños - Control Voley</title><script src="https://cdn.tailwindcss.com"></script><link href="https://fonts.googleapis.com/css2?family=Inter:wght@100..900&display=swap" rel="stylesheet"><style>:root{--c1:#001F3F;--c2:#0074D9;--c3:#f0f8ff}body{font-family:'Inter',sans-serif;background-color:var(--c3)}.azul-marino-bg{background-color:var(--c1)}.azul-electrico-text{color:var(--c2)}.shadow-lg-azul{box-shadow:0 0 20px -5px rgba(0,31,63,.4)}.banner-header{background-image:url('img/banner.png');background-size:cover;background-position:center;min-height:250px;width:100%}</style></head><body><div class="banner-header"></div><div class="container mx-auto p-4 md:p-8"><header class="mb-8 flex flex-col md:flex-row justify-between items-center border-b pb-4"><div class="flex items-center space-x-4"><a href="index_menu.html" class="text-gray-600 hover:text-[#0074D9]"><svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 15l-3-3m0 0l3-3m-3 3h8M3 12a9 9 0 1118 0 9 9 0 01-18 0z"/></svg></a><h1 class="text-3xl font-extrabold text-gray-900">Cumpleaños de <span id="mDisp" class="azul-electrico-text">...</span></h1></div><button onclick="logout()" class="mt-4 md:mt-0 py-2 px-4 bg-red-600 text-white font-semibold rounded-lg shadow-md">Cerrar Sesión</button></header><div class="bg-white p-6 rounded-xl shadow-lg-azul"><h2 class="text-2xl font-bold mb-4 text-gray-800">Listado</h2><div id="cList" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"><p id="msg" class="col-span-full text-center py-8 text-gray-500">Cargando...</p></div></div></div><script type="module">import{initializeApp as _0}from"https://www.gstatic.com/firebasejs/11.6.1/firebase-app.js";import{getAuth as _1,onAuthStateChanged as _2,signOut as _3}from"https://www.gstatic.com/firebasejs/11.6.1/firebase-auth.js";import{getFirestore as _4,collection as _5,doc as _6,onSnapshot as _7,query as _8,where as _9,getDoc as _10,enableIndexedDbPersistence as _11}from"https://www.gstatic.com/firebasejs/11.6.1/firebase-firestore.js";const _cf={apiKey:"AIzaSyB5RB7mm1j-0gjCNTUEJTkyEqLjyZ3C7ws",authDomain:"datacontrolvoley-ff556.firebaseapp.com",projectId:"datacontrolvoley-ff556",storageBucket:"datacontrolvoley-ff556.firebasestorage.app",messagingSenderId:"516409072606",appId:"1:516409072606:web:132538dba358a077d71b4f"},_ap=_0(_cf),_au=_1(_ap),_db=_4(_ap);_11(_db).catch(()=>{});let _tId=null;const _d=_("mDisp"),_l=_("cList"),_m=_("msg");function _(id){return document.getElementById(id)}async function _gT(u){try{const s=await _10(_6(_db,"users",u));return s.exists()?s.data().teamId:null}catch(e){return null}}function _calcA(d){const b=new Date(d),t=new Date();let a=t.getFullYear()-b.getFullYear();return(t.getMonth()<b.getMonth()||(t.getMonth()===b.getMonth()&&t.getDate()<b.getDate()))?a-1:a}function _load(){const m=["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"],cM=new Date().getMonth();_d.textContent=m[cM];const q=_8(_5(_db,"club_athletes"),_9("clubId","==",_tId));_7(q,(s)=>{const b=[];s.forEach(d=>{const a=d.data();if(a.fechaNacimiento&&new Date(a.fechaNacimiento+'T00:00:00').getMonth()===cM)b.push(a)});_render(b)})}_render=(b)=>{_l.innerHTML='';if(!b.length){_l.innerHTML=`<p class="col-span-full text-center py-8">No hay cumpleañeros en ${_d.textContent}</p>`;return}b.sort((x,y)=>new Date(x.fechaNacimiento+'T00:00:00').getDate()-new Date(y.fechaNacimiento+'T00:00:00').getDate()).forEach(a=>{const d=new Date(a.fechaNacimiento+'T00:00:00').getDate(),age=_calcA(a.fechaNacimiento);_l.insertAdjacentHTML('beforeend',`<div class="bg-white border border-yellow-300 p-6 rounded-xl shadow-md flex items-center space-x-4"><div class="p-3 rounded-full bg-yellow-400 text-white"><svg class="h-6 w-6" viewBox="0 0 20 20" fill="currentColor"><path d="M10 2a8 8 0 00-8 8c0 1.255.228 2.478.672 3.619l3.058-2.553a.75.75 0 011.028 1.077L3.6 15.688A7.994 7.994 0 0010 18a8 8 0 008-8h-3a5 5 0 01-5 5V5z"/></svg></div><div><p class="text-xl font-bold text-[#0074D9]">${a.nombre} ${a.apellido}</p><p class="text-lg font-semibold">Día: <span class="text-red-600">${d}</span></p><p class="text-sm text-gray-500">Cumple ${age+1} años</p></div></div>`)});};_2(_au,async(u)=>{if(u){_tId=await _gT(u.uid);if(_tId)_load();else{await _3(_au);location.href='index.html'}}else location.href='index.html'});window.logout=async()=>{await _3(_au);localStorage.removeItem('currentClub');location.href='index.html'};if('serviceWorker'in navigator){window.addEventListener('load',()=>{navigator.serviceWorker.register('./sw.js')})}</script></body></html>
