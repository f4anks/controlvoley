<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Menú Principal - Control Voley</title>
    
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@100..900&display=swap" rel="stylesheet">
    
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-auth.js"></script>

    <script>
        // CONFIGURACIÓN Y INICIALIZACIÓN DE FIREBASE
        const firebaseConfig = {
            apiKey: "AIzaSyB5RB7mm1j-0gjCNTUEJTkyEqLjyZ3C7ws",
            authDomain: "datacontrolvoley-ff556.firebaseapp.com",
            projectId: "datacontrolvoley-ff556",
            storageBucket: "datacontrolvoley-ff556.firebasestorage.app",
            messagingSenderId: "516409072606",
            appId: "1:516409072606:web:132538dba358a076d71b4f"
        };
        firebase.initializeApp(firebaseConfig);
        const auth = firebase.auth(); 

        // CONFIGURACIÓN DE TAILWIND CSS (Mismo tema)
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        'voley-blue': '#1e40af', // Azul fuerte (Blue 800)
                        'voley-dark': '#1e3a8a', // Azul oscuro (Blue 900)
                        'voley-light': '#eff6ff', // Azul muy claro (Blue 50)
                        'btn-primary': '#1e40af', 
                        'btn-hover': '#1e3a8a', 
                    },
                    fontFamily: {
                        sans: ['Inter', 'sans-serif'],
                    },
                }
            }
        }
    </script>
    
    <style>
        .card-shadow { box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -2px rgba(0, 0, 0, 0.06); }
        .bg-card { background-color: #ffffff; }
    </style>
</head>

<body class="bg-voley-light font-sans min-h-screen flex flex-col">

    <header class="bg-voley-dark shadow-lg py-4 px-6 md:px-12 flex justify-between items-center">
        <h1 class="text-3xl font-extrabold text-white">
            Menú Principal
        </h1>
        <div class="flex items-center space-x-4">
            <span id="clubDisplay" class="text-lg font-semibold text-voley-light py-1 px-3 bg-voley-blue rounded-full">Cargando Club...</span>
            <button id="logoutButton" class="py-2 px-4 bg-red-600 text-white font-semibold rounded-lg shadow-md hover:bg-red-700 transition duration-300">
                Cerrar Sesión
            </button>
        </div>
    </header>

    <main class="flex-grow p-8 md:p-12">
        <h2 class="text-3xl font-bold text-voley-dark mb-8">Opciones del Sistema</h2>

        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
            
            <a href="index_atletas.html" class="bg-card p-6 rounded-xl card-shadow border-t-4 border-voley-blue hover:shadow-xl transition duration-300 transform hover:-translate-y-1">
                <div class="text-voley-blue mb-4">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-10 w-10" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M17 20h5v-2a3 3 0 00-5.356-1.857M17 20h2v-2a3 3 0 00-5.356-1.857M9 20H4v-2a3 3 0 015-2.236M9 20A5.966 5.966 0 0012 16.5m1.383-2.61a3 3 0 114.743-1.889M12 11.25V12m-4.5-5.25v2.25M9 8.25h.008M12 21.75V15m-4.5 5.25h9V15m-9-3.75h9m-4.5 3.75h.008" />
                    </svg>
                </div>
                <h3 class="text-xl font-bold text-voley-dark mb-2">Gestión de Atletas</h3>
                <p class="text-gray-600">Registra, edita y consulta la nómina completa de tu club. Datos personales y deportivos.</p>
            </a>

            <a href="index_nomina.html" class="bg-card p-6 rounded-xl card-shadow border-t-4 border-voley-blue hover:shadow-xl transition duration-300 transform hover:-translate-y-1">
                <div class="text-voley-blue mb-4">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-10 w-10" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
                    </svg>
                </div>
                <h3 class="text-xl font-bold text-voley-dark mb-2">Nómina y Pagos</h3>
                <p class="text-gray-600">Lleva el control de salarios, fechas de pago y estado de solvencia de cada atleta.</p>
            </a>
            
            <a href="index_estadisticas.html" class="bg-card p-6 rounded-xl card-shadow border-t-4 border-voley-blue hover:shadow-xl transition duration-300 transform hover:-translate-y-1">
                <div class="text-voley-blue mb-4">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-10 w-10" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M9 19V6l7 7V6M5 19V6M19 19V6" />
                    </svg>
                </div>
                <h3 class="text-xl font-bold text-voley-dark mb-2">Estadísticas de Juego</h3>
                <p class="text-gray-600">Registra y analiza el desempeño de tu equipo en cada partido y torneo.</p>
            </a>
        </div>
    </main>

    <footer class="w-full py-3 text-center bg-voley-dark shadow-inner">
        <p class="text-sm text-white/70">
            &copy; 2023 Todos los derechos reservados a Sistematikos - Frank Hernandez
        </p>
    </footer>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const clubDisplay = document.getElementById('clubDisplay');
            const clubName = localStorage.getItem('currentClub');
            const logoutButton = document.getElementById('logoutButton');

            if (clubName) {
                clubDisplay.textContent = clubName;
            }

            // 1. Verificación de Sesión
            auth.onAuthStateChanged((user) => {
                if (!user) {
                    // Si no hay usuario logueado, redirige al inicio
                    localStorage.removeItem('currentClub');
                    window.location.href = 'index.html';
                }
            });

            // 2. Lógica para Cerrar Sesión
            logoutButton.addEventListener('click', () => {
                auth.signOut().then(() => {
                    localStorage.removeItem('currentClub');
                    window.location.href = 'index.html';
                }).catch((error) => {
                    console.error("Error al cerrar sesión:", error);
                    alert("Ocurrió un error al cerrar la sesión. Intenta nuevamente.");
                });
            });
        });
    </script>
</body>
</html>
