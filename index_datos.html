<!DOCTYPE html><html lang="es"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1"><title id="pT">Ficha Atleta - Control Voley</title><script src="https://cdn.tailwindcss.com"></script><link href="https://fonts.googleapis.com/css2?family=Inter:wght@100..900&display=swap" rel="stylesheet"><style>:root{--m:#001F3F;--e:#0074D9;--f:#f0f8ff}body{font-family:'Inter',sans-serif;background:var(--f)}.b-h{background-image:url('img/banner.png');background-size:cover;background-position:center;min-height:200px;width:100%}.m-c{background:#f7f9fb;border-left:4px solid var(--e)}</style></head><body><div class="b-h"></div><div class="container mx-auto p-4"><header class="mb-6 flex justify-between items-center border-b pb-4"><div class="flex items-center space-x-3"><a href="index_ficha.html" class="text-gray-500 hover:text-blue-600 transition"><svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 15l-3-3m0 0l3-3m-3 3h8M3 12a9 9 0 1118 0 9 9 0 01-18 0z"/></svg></a><h1 class="text-2xl font-black text-gray-800">Ficha: <span id="aNT" class="text-blue-600">...</span></h1></div><button onclick="logout()" class="py-1 px-4 bg-red-600 text-white rounded-lg text-sm font-bold shadow hover:bg-red-700 transition">Salir</button></header><div id="aDC" class="bg-white p-6 rounded-xl shadow-lg border border-gray-100"><p id="lM" class="text-center py-10 text-gray-400 italic">Cargando datos del atleta...</p><div id="aD" class="hidden"><h2 class="text-lg font-bold mb-4 text-blue-900 border-b pb-2">Datos Personales</h2><div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-8 text-sm"><div><span class="font-semibold text-gray-500">Nombre Completo:</span> <span id="nAp" class="text-gray-900 block font-medium"></span></div><div><span class="font-semibold text-gray-500">Cédula de Identidad:</span> <span id="cI" class="text-gray-900 block font-medium"></span></div><div><span class="font-semibold text-gray-500">Teléfono Contacto:</span> <span id="tel" class="text-gray-900 block font-medium"></span></div><div><span class="font-semibold text-gray-500">Fecha de Nacimiento:</span> <span id="fNa" class="text-gray-900 block font-medium"></span></div><div><span class="font-semibold text-gray-500">Edad Actual:</span> <span id="eda" class="text-blue-700 font-bold block text-base"></span></div><div><span class="font-semibold text-gray-500">Categoría:</span> <span id="cat" class="text-blue-600 font-bold block text-base"></span></div><div><span class="font-semibold text-gray-500">Número Camiseta:</span> <span id="nCa" class="text-indigo-600 font-black text-xl block"></span></div></div><h2 class="text-lg font-bold mb-4 text-blue-900 border-b pb-2">Pagos y Métricas Físicas</h2><div class="grid grid-cols-2 lg:grid-cols-4 gap-4"><div class="m-c p-4 rounded-lg shadow-sm"><p class="text-xs text-gray-500 font-bold uppercase">Monto Nómina <span id="nomT"></span></p><p id="mPa" class="text-2xl font-black text-gray-800"></p></div><div class="m-c p-4 rounded-lg shadow-sm"><p class="text-xs text-gray-500 font-bold uppercase">Último Pago</p><p id="uPa" class="text-sm font-bold text-gray-800 mt-2"></p></div><div class="m-c p-4 rounded-lg shadow-sm"><p class="text-xs text-gray-500 font-bold uppercase mb-2">Solvencia</p><span id="sSt" class="text-xs font-bold px-3 py-1 rounded-full"></span></div><div class="m-c p-4 rounded-lg shadow-sm"><p class="text-xs text-gray-500 font-bold uppercase">IMC (Estado)</p><p id="imc" class="text-2xl font-black text-gray-800"></p><span id="iSt" class="text-[10px] font-bold px-2 py-0.5 rounded uppercase"></span></div><div class="m-c p-4 rounded-lg shadow-sm"><p class="text-xs text-gray-500 font-bold uppercase">Peso</p><p id="pes" class="text-2xl font-black text-gray-800"></p></div><div class="m-c p-4 rounded-lg shadow-sm"><p class="text-xs text-gray-500 font-bold uppercase">Talla Actual</p><p id="tal" class="text-2xl font-black text-gray-800"></p></div><div class="m-c p-4 rounded-lg shadow-sm bg-blue-50"><p class="text-xs text-blue-700 font-bold uppercase">Proyección Talla</p><p id="tPr" class="text-2xl font-black text-blue-800"></p><p class="text-[9px] text-blue-500 mt-1">*Estimado por categoría</p></div></div></div></div></div><script type="module">import{initializeApp as i}from"https://www.gstatic.com/firebasejs/11.6.1/firebase-app.js";import{getAuth as a,onAuthStateChanged as o,signOut as s}from"https://www.gstatic.com/firebasejs/11.6.1/firebase-auth.js";import{getFirestore as r,doc as t,getDoc as e}from"https://www.gstatic.com/firebasejs/11.6.1/firebase-firestore.js";const c={apiKey:"AIzaSyB5RB7mm1j-0gjCNTUEJTkyEqLjyZ3C7ws",authDomain:"datacontrolvoley-ff556.firebaseapp.com",projectId:"datacontrolvoley-ff556",storageBucket:"datacontrolvoley-ff556.firebasestorage.app",messagingSenderId:"516409072606",appId:"1:516409072606:web:132538dba358a077d71b4f"},l=i(c),n=a(l),d=r(l),_=i=>document.getElementById(i),h=i=>(new RegExp("[?&]"+i+"=([^&#]*)")).exec(window.location.search)?.[1]||"",u=i=>{if(!i)return"N/A";const a=new Date(i),o=new Date();let s=o.getFullYear()-a.getFullYear();return(o.getMonth()<a.getMonth()||o.getMonth()===a.getMonth()&&o.getDate()<a.getDate())&&s--,s},g=i=>{if(!i||0===i)return{t:"N/A",c:"bg-gray-200 text-gray-600"};if(i<18.5)return{t:"BAJO PESO",c:"bg-yellow-400 text-white"};if(i<=24.9)return{t:"NORMAL",c:"bg-green-500 text-white"};if(i<=29.9)return{t:"SOBREPESO",c:"bg-orange-500 text-white"};return{t:"OBESIDAD",c:"bg-red-600 text-white"}},m=(i,a)=>{if(!i)return{s:"Insolvente",c:"bg-red-500 text-white"};const o=(new Date-new Date(i))/864e5,s="quincenal"===a?15:30;return o<=s?{s:"Solvente",c:"bg-green-500 text-white"}:{s:"Insolvente",c:"bg-yellow-500 text-black"}},v=async i=>{try{const a=await e(t(d,"club_athletes",i));if(a.exists()){const i=a.data(),o={nc:`${i.nombre||""} ${i.apellido||""}`,ci:i.cedulaIdentidad||"N/A",te:i.telefono||"N/A",fn:i.fechaNacimiento||null,ca:i.categoria||"N/A",nm:i.nroCamiseta??"-",ps:parseFloat(i.peso)||0,ta:parseFloat(i.talla)||0,fr:i.frecuenciaPago||"mensual",up:i.fechaUltimoPago||null,mt:i.montoPago||0},s=o.ta/100,r=o.ps>0&&s>0?o.ps/(s*s):0;let c=0;o.ta>0&&(["U9","U11"].includes(o.ca)?c=15:"U13"===o.ca?c=10:"U15"===o.ca?c=6:"U19"===o.ca&&(c=2));const l=o.ta>0?(o.ta+c)/100:0,n=m(o.up,o.fr),h=g(r);_("aNT").innerText=o.nc,_("pT").innerText="Ficha: "+o.nc,_("nAp").innerText=o.nc,_("cI").innerText=o.ci,_("tel").innerText=o.te,_("fNa").innerText=o.fn||"No registrada",_("eda").innerText=u(o.fn)+" años",_("cat").innerText=o.ca,_("nCa").innerText=o.nm,_("nomT").innerText="quincenal"===o.fr?"(Q)":"(M)",_("mPa").innerText=parseFloat(o.mt).toFixed(2)+"$",_("uPa").innerText=o.up||"Sin registros",_("sSt").innerText=n.s,_("sSt").className="text-xs font-bold px-3 py-1 rounded-full "+n.c,_("pes").innerText=o.ps?o.ps+" kg":"N/A",_("tal").innerText=o.ta?o.ta+" cm":"N/A",_("imc").innerText=r>0?r.toFixed(2):"N/A",_("iSt").innerText=h.t,_("iSt").className="text-[10px] font-bold px-2 py-0.5 rounded uppercase "+h.c,_("tPr").innerText=l>0?l.toFixed(2)+" m":"N/A",_("lM").classList.add("hidden"),_("aD").classList.remove("hidden")}else _("lM").innerText="Atleta no encontrado en el sistema."}catch(i){console.error(i),_("lM").innerText="Error al conectar con la base de datos."}};o(n,i=>{const a=h("id");i&&a?v(a):a?window.location.href="index.html":_("lM").innerText="ID de atleta no proporcionado."}),window.logout=()=>s(n).then(()=>location.href="index.html");</script></body></html>
