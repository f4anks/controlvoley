<!DOCTYPE html><html lang="es"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1"><title id="pT">Ficha - LVMEL</title><script src="https://cdn.tailwindcss.com"></script><link href="https://fonts.googleapis.com/css2?family=Inter:wght@100..900&display=swap" rel="stylesheet"><style>:root{--c1:#001F3F;--c2:#0074D9;--bg:#f0f8ff}body{font-family:'Inter',sans-serif;background-color:var(--bg)}.azul-marino-bg{background-color:var(--c1)}.azul-electrico-text{color:var(--c2)}.shadow-lg-azul{box-shadow:0 0 20px -5px rgba(0,31,63,.4)}.banner-header{background-image:url('img/banner.png');background-size:cover;background-position:center;min-height:250px;width:100%}.data-label{font-weight:600;color:#4b5563}.metric-card{background-color:#f7f9fb;border-left:4px solid var(--c2)}</style></head><body><div class="banner-header"></div><div class="container mx-auto p-4 md:p-8"><header class="mb-8 flex flex-col md:flex-row justify-between items-center border-b pb-4"><div class="flex items-center space-x-4"><a href="index_ficha.html" class="text-gray-600 hover:text-[#0074D9]"><svg class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 15l-3-3m0 0l3-3m-3 3h8M3 12a9 9 0 1118 0 9 9 0 01-18 0z"/></svg></a><h1 class="text-3xl font-extrabold">Ficha de <span id="aNT" class="azul-electrico-text">Atleta</span></h1></div><button onclick="logout()" class="mt-4 md:mt-0 py-2 px-4 bg-red-600 text-white font-semibold rounded-lg shadow-md">Cerrar Sesión</button></header><div id="aDC" class="bg-white p-6 rounded-xl shadow-lg-azul"><p id="lM" class="text-center py-10 text-gray-500">Cargando...</p><div id="aD" class="hidden"><h2 class="text-2xl font-bold mb-6 border-b pb-2 azul-electrico-text">Datos Personales</h2><div class="grid grid-cols-1 md:grid-cols-2 gap-x-12 gap-y-4 mb-8"><div><span class="data-label">Nombre:</span> <span id="nAp" class="text-gray-800"></span></div><div><span class="data-label">C.I:</span> <span id="cI" class="text-gray-800"></span></div><div><span class="data-label">Tel:</span> <span id="tel" class="text-gray-800"></span></div><div><span class="data-label">Nac:</span> <span id="fN" class="text-gray-800"></span></div><div><span class="data-label">Edad:</span> <span id="ed" class="text-gray-800"></span></div><div><span class="data-label">Cat:</span> <span id="cat" class="font-bold azul-electrico-text"></span></div><div><span class="data-label">Camiseta:</span> <span id="nC" class="font-bold text-xl azul-electrico-text"></span></div></div><h2 class="text-2xl font-bold mb-6 border-b pb-2 azul-electrico-text">Pagos y Métricas</h2><div class="grid grid-cols-1 sm:grid-cols-3 gap-6 mb-8"><div class="metric-card p-4 rounded-lg shadow-sm"><p class="data-label text-sm">Mensualidad</p><p id="mPM" class="text-2xl font-extrabold"></p></div><div class="metric-card p-4 rounded-lg shadow-sm"><p class="data-label text-sm">Último Pago</p><p id="fUP" class="text-lg font-bold"></p></div><div class="metric-card p-4 rounded-lg shadow-sm"><p class="data-label text-sm">Estado</p><span id="sSt" class="text-lg font-bold inline-block mt-2 px-2 py-1 rounded-full"></span></div></div><div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6"><div class="metric-card p-4 rounded-lg shadow-sm"><p class="data-label text-sm">Peso (kg)</p><p id="ps" class="text-2xl font-bold"></p></div><div class="metric-card p-4 rounded-lg shadow-sm"><p class="data-label text-sm">Talla (m)</p><p id="ta" class="text-2xl font-bold"></p></div><div class="metric-card p-4 rounded-lg shadow-sm"><p class="data-label text-sm">IMC</p><p id="imc" class="text-2xl font-bold"></p><span id="imS" class="text-xs font-semibold rounded-full px-2"></span></div><div class="metric-card p-4 rounded-lg shadow-sm"><p class="data-label text-sm">Proyección</p><p id="tPr" class="text-2xl font-bold"></p></div></div></div></div></div><script type="module">import{initializeApp as _0}from"https://www.gstatic.com/firebasejs/11.6.1/firebase-app.js";import{getAuth as _1,onAuthStateChanged as _2,signOut as _3}from"https://www.gstatic.com/firebasejs/11.6.1/firebase-auth.js";import{getFirestore as _4,doc as _5,getDoc as _6,enableIndexedDbPersistence as _7}from"https://www.gstatic.com/firebasejs/11.6.1/firebase-firestore.js";const _cf={apiKey:"AIzaSyB5RB7mm1j-0gjCNTUEJTkyEqLjyZ3C7ws",authDomain:"datacontrolvoley-ff556.firebaseapp.com",projectId:"datacontrolvoley-ff556",storageBucket:"datacontrolvoley-ff556.firebasestorage.app",messagingSenderId:"516409072606",appId:"1:516409072606:web:132538dba358a077d71b4f"},_ap=_0(_cf),_au=_1(_ap),_db=_4(_ap);_7(_db).catch(()=>{});const _=(id)=>document.getElementById(id);function _gP(n){const r=new RegExp('[\\?&]'+n+'=([^&#]*)').exec(location.search);return r===null?'':decodeURIComponent(r[1].replace(/\+/g,' '))}function _cA(d){if(!d)return'N/A';const b=new Date(d),t=new Date();let a=t.getFullYear()-b.getFullYear();return(t.getMonth()<b.getMonth()||(t.getMonth()===b.getMonth()&&t.getDate()<b.getDate()))?a-1:a}async function _load(id){try{const s=await _6(_5(_db,"club_athletes",id));if(s.exists()){const d=s.data(),f=d.nombre+" "+d.apellido,im=(d.peso/(d.talla*d.talla)).toFixed(2);_('aNT').textContent=f;_('pT').textContent="Ficha "+f;_('nAp').textContent=f;_('cI').textContent=d.cedulaIdentidad||'N/A';_('tel').textContent=d.telefono||'N/A';_('fN').textContent=d.fechaNacimiento||'N/A';_('ed').textContent=_cA(d.fechaNacimiento)+" años";_('cat').textContent=d.categoria||'N/A';_('nC').textContent=d.nroCamiseta??'N/A';_('mPM').textContent=(d.montoPagoMensual||0).toFixed(2);_('fUP').textContent=d.fechaUltimoPago||'N/A';const diff=Math.round((new Date()-new Date(d.fechaUltimoPago))/(1000*60*60*24));_('sSt').textContent=diff<=30?"Solvente":"Insolvente";_('sSt').className="text-lg font-bold inline-block mt-2 px-2 py-1 rounded-full "+(diff<=30?"bg-green-500 text-white":"bg-yellow-500");_('ps').textContent=(d.peso||0).toFixed(1);_('ta').textContent=(d.talla||0).toFixed(2);_('imc').textContent=im;_('imS').textContent=im<18.5?"Bajo":im<=24.9?"Normal":"Sobrepeso";_('tPr').textContent=(d.talla+0.05).toFixed(2);_('lM').classList.add('hidden');_('aD').classList.remove('hidden')}else _('lM').textContent="No encontrado"}catch(e){_('lM').textContent="Error de red"}}const _id=_gP('id');if(!_id)_('lM').textContent="ID Requerido";else _2(_au,(u)=>u?_load(_id):location.href='index.html');window.logout=async()=>{await _3(_au);localStorage.removeItem('currentClub');location.href='index.html'};if('serviceWorker'in navigator){window.addEventListener('load',()=>{navigator.serviceWorker.register('./sw.js')})}</script></body></html>
